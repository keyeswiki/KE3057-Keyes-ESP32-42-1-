<xml version="Mixly 2.0 rc4" board="Arduino ESP32@ESP32 Dev Module"><block type="base_setup" id="|I^~.I*QlNq?xV:7ApE?" x="-2055" y="-1429"><statement name="DO"><block type="serial_begin" id="T`3WuyRDTG-;_3;PC`l]"><field name="serial_select">Serial</field><value name="CONTENT"><shadow type="math_number" id="}ZK-A/kt$XYPM(-p##-p"><field name="NUM">9600</field></shadow></value><next><block type="sensor_encoder_init" id="GI[93Dfw`3(9@OPgN-dx"><field name="TYPE">1</field><field name="mode">2</field><value name="CLK"><shadow type="pins_digital" id="VSyX_yVKqb#((D;8y=_f"><field name="PIN">14</field></shadow></value><value name="DT"><shadow type="pins_digital" id="RXbobi;_wG7Bj!lSh!I^"><field name="PIN">27</field></shadow></value><next><block type="variables_declare" id="sQc^An^Tyy]!6d4f$+FJ"><field name="variables_type">global_variate</field><field name="VAR">Button</field><field name="TYPE">int</field><value name="VALUE"><block type="math_number" id="x:^wEh|]m~QV;=Bg3tlS"><field name="NUM">0</field></block></value><next><block type="variables_declare" id="]MHk$(nVK8E!:D+oJfj|"><field name="variables_type">global_variate</field><field name="VAR">btn_state</field><field name="TYPE">boolean</field><value name="VALUE"><block type="math_number" id="nFXg7dkb?(u/h3$zg[e;"><field name="NUM">0</field></block></value><next><block type="variables_declare" id="HV}yf~-foGY!}x]Lj(e5"><field name="variables_type">global_variate</field><field name="VAR">counter</field><field name="TYPE">int</field><value name="VALUE"><block type="math_number" id="!FFsN=POXlZ_$o0HSkq9"><field name="NUM">0</field></block></value><next><block type="variables_declare" id="RwkF+j!wCU[)=+8pfHDI"><field name="variables_type">global_variate</field><field name="VAR">val</field><field name="TYPE">int</field><value name="VALUE"><block type="math_number" id="X-Q-vy)~L(;bymCphs:P"><field name="NUM">0</field></block></value><next><block type="ke_rgb2_2" id="qA+H(rT0:*s3+q9ZZHpw"><value name="R"><shadow type="pins_digital" id="|LK}n8B]-Db.6qAMin?q"><field name="PIN">32</field></shadow></value><value name="r"><shadow type="math_number" id="3jS_5C+Gfp;2?OOzr|$z"><field name="NUM">0</field></shadow></value><value name="G"><shadow type="pins_digital" id="]4J{@l^8,*zkA5SkFFcE"><field name="PIN">4</field></shadow></value><value name="g"><shadow type="math_number" id="R|D~ujWh|_J1M8iaDP$`"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="pins_digital" id="pc8.aK]a5In]bt0_l*+R"><field name="PIN">2</field></shadow></value><value name="b"><shadow type="math_number" id="veWW$rOPxOeC$ZXKm/,P"><field name="NUM">0</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="sensor_encoder_handle" id=".3UVOBXkFKhortS;hq5K" x="-2054" y="-1134"><field name="TYPE">1</field><field name="OPERATE_TYPE">setLeftRotationHandler</field><statement name="DO"><block type="variables_set" id="2zHk0Ks1X.1np|M+~?(;"><field name="VAR">counter</field><value name="VALUE"><block type="math_arithmetic" id="Ye[#cdo;:wpaAhZn1GDP"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="Sp*o5PBsZxpfqu@oQC|Y"><field name="NUM">1</field></shadow><block type="variables_get" id="S=.,-?|IRqmyA:=is)H2"><field name="VAR">counter</field></block></value><value name="B"><shadow type="math_number" id="e,a2)b,cc0/y0^Y8_-ZX"><field name="NUM">1</field></shadow></value></block></value><next><block type="variables_set" id="f$L/)9nvAhc|o,6-}.p;"><field name="VAR">val</field><value name="VALUE"><block type="math_arithmetic" id="^I1sLmF2zA8`B7iNGLLT"><field name="OP">QUYU</field><value name="A"><shadow type="math_number" id="f#9l9h!u]Ge|=|YOmBtt"><field name="NUM">1</field></shadow><block type="variables_get" id="b,1Vx7h?doiDq3-G{Z=J"><field name="VAR">counter</field></block></value><value name="B"><shadow type="math_number" id=",sntESVq,.v}n0OgQ06X"><field name="NUM">3</field></shadow></value></block></value><next><block type="serial_print" id="M^`j6T2[FZUUsGOY9jak"><field name="serial_select">Serial</field><field name="new_line">print</field><value name="CONTENT"><block type="variables_get" id="raqsV3Uk?UJCe.jF3YTN"><field name="VAR">counter</field></block></value><next><block type="serial_print" id="a$o~UBM?2+mbGSMQo!P3"><field name="serial_select">Serial</field><field name="new_line">print</field><value name="CONTENT"><block type="text" id="Yf1g}VnH)PQY,GRE1+sw"><field name="TEXT">  </field></block></value><next><block type="serial_print" id="{cOXgh.4yq[1u2bM/sAr"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="variables_get" id="527mI`wbqac-aki-iv,P"><field name="VAR">val</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type="sensor_encoder_handle" id="(TBdOSKH^!5{V)1izvID" x="-2055" y="-911"><field name="TYPE">1</field><field name="OPERATE_TYPE">setRightRotationHandler</field><statement name="DO"><block type="variables_set" id="AwpbQ$Q7oM[e-bPu1e)i"><field name="VAR">counter</field><value name="VALUE"><block type="math_arithmetic" id="3xXY6GSE!jovGzo6^+?|"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="ZFn.X@UkGE,~v{h6i@5O"><field name="NUM">1</field></shadow><block type="variables_get" id="p3fv/Xxl+={c?s:GS`qg"><field name="VAR">counter</field></block></value><value name="B"><shadow type="math_number" id="Yu~/=H#r5SoA8ucx:3/l"><field name="NUM">1</field></shadow></value></block></value><next><block type="variables_set" id="^:T0!l^H+7{RiCe$r$z)"><field name="VAR">val</field><value name="VALUE"><block type="math_arithmetic" id="6MZJ[pa`-QOk=njb;v6E"><field name="OP">QUYU</field><value name="A"><shadow type="math_number" id="o;NxCAK($$3t}$e?xK,/"><field name="NUM">1</field></shadow><block type="variables_get" id="RbfSbM,i1aD$tg4}|GD]"><field name="VAR">counter</field></block></value><value name="B"><shadow type="math_number" id="ndB/Z*hJ7?.},v94XBAy"><field name="NUM">3</field></shadow></value></block></value><next><block type="serial_print" id="4e)}J_P_Rqa.Xr6n^v!w"><field name="serial_select">Serial</field><field name="new_line">print</field><value name="CONTENT"><block type="variables_get" id="BcWpvi|^m?N:icDpf$y`"><field name="VAR">counter</field></block></value><next><block type="serial_print" id="+$#Upr_t4Q3M]Px1.NC_"><field name="serial_select">Serial</field><field name="new_line">print</field><value name="CONTENT"><block type="text" id="WTYmn}Uzi!.~3{VHOmwm"><field name="TEXT">  </field></block></value><next><block type="serial_print" id="EMBcyF^sHp@XNchIJXJw"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="variables_get" id="BK02TkY4gB65Lq$Z;Nvw"><field name="VAR">val</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type="variables_set" id=",40Oek:Pbq$`z;qCteHK" x="-2054" y="-689"><field name="VAR">Button</field><value name="VALUE"><block type="encoder_button" id="B1xzEv?A#A!f=-Hyxc0#"><value name="PIN"><shadow type="pins_digital" id="hNPge5UrJR:tK8M@x#GC"><field name="PIN">16</field></shadow></value></block></value><next><block type="controls_if" id="1+M9r#R#=y/?jYI0d:OG"><value name="IF0"><block type="logic_compare" id="356f/RiJ9#I.enO$V2TT"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="4}yQ4IoKX~V-Ug+yMd5`"><field name="VAR">Button</field></block></value><value name="B"><block type="math_number" id="a[*-cy[]]|X3N!+[~9K3"><field name="NUM">0</field></block></value></block></value><statement name="DO0"><block type="controls_delay" id="9lnI0L8?A@QIZ}]vPi/+"><field name="UNIT">delay</field><value name="DELAY_TIME"><shadow type="math_number" id="bjPb@.EC/w:*5auKO$a^"><field name="NUM">10</field></shadow></value><next><block type="controls_if" id=".+w=EQEXdBsL(D1zdLO["><value name="IF0"><block type="logic_compare" id="TxPK}Vdek.r/xA1tbiR-"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="Cu^3eAgS8rl11l3hsP?`"><field name="VAR">Button</field></block></value><value name="B"><block type="math_number" id="B8!Y4)r~7eB6V+)`m$qN"><field name="NUM">0</field></block></value></block></value><statement name="DO0"><block type="controls_delay" id="/^*X@5XT;,l{5{x7$p09"><field name="UNIT">delay</field><value name="DELAY_TIME"><shadow type="math_number" id="K.V*iU`$Jo!lu[ZPSwx5"><field name="NUM">10</field></shadow></value><next><block type="variables_set" id="-,::w^x4Yhbe9J@WA$?z"><field name="VAR">btn_state</field><value name="VALUE"><block type="math_number" id="SDSc_nUC7/XiiwJ}47mp"><field name="NUM">1</field></block></value><next><block type="controls_whileUntil" id="78tVhEUu[3:;Mg1s.Wy]"><field name="MODE">WHILE</field><value name="BOOL"><shadow type="logic_boolean" id="-Cd_hY#pyw=}BkFK_u5N"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="YjH*`_Foo_~zj?`Z8f1;"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="O5?9tdfB0gX|;4d[8edF"><field name="VAR">btn_state</field></block></value><value name="B"><block type="math_number" id="K=*j3Y[:/?f!0fRSv;Ig"><field name="NUM">1</field></block></value></block></value><statement name="DO"><block type="variables_set" id=",XpD$yk,(]*Rl]x7L*UD"><field name="VAR">Button</field><value name="VALUE"><block type="encoder_button" id="DK.?H[L@7e|azvkbDb~K"><value name="PIN"><shadow type="pins_digital" id="M!`u;{GDoToow_Z+EC9V"><field name="PIN">16</field></shadow></value></block></value><next><block type="controls_if" id="VwkY+,SyDFh@32SHQ|Vs"><value name="IF0"><block type="logic_compare" id="[A;Mt)N/uEJojyro$vTD"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="+*w=4;Y`,(~eHxD~Q3tE"><field name="VAR">Button</field></block></value><value name="B"><block type="math_number" id="ZPtW:oh^|b4.lTQ8qh(,"><field name="NUM">1</field></block></value></block></value><statement name="DO0"><block type="serial_print" id="e_NwA?sDn|7c):YRRzcD"><field name="serial_select">Serial</field><field name="new_line">println</field><value name="CONTENT"><block type="text" id="kPbNejc*I9kl:,Kye$aR"><field name="TEXT">Button pressed!</field></block></value><next><block type="variables_set" id="iF$]le]Ve|v463^7qR;8"><field name="VAR">btn_state</field><value name="VALUE"><block type="math_number" id="_kht|NEO:JID}vL$Kenv"><field name="NUM">0</field></block></value></block></next></block></statement></block></next></block></statement></block></next></block></next></block></statement></block></next></block></statement><next><block type="controls_if" id="l^|(s{B7A0C1Xh^mI6`/"><value name="IF0"><block type="logic_compare" id="[1qOg8ZLSix_WSr|2_z?"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="`ni{W[a$HJqDnW^:.mrH"><field name="VAR">val</field></block></value><value name="B"><block type="math_number" id=",Q?,MOBRM:R~[^edzXLM"><field name="NUM">0</field></block></value></block></value><statement name="DO0"><block type="ke_rgb2_2" id="[K:GBw{lERdrqhY~=Y)G"><value name="R"><shadow type="pins_digital" id="KoSxiGS*Y/{Rn9HfCX;c"><field name="PIN">32</field></shadow></value><value name="r"><shadow type="math_number" id="vP]ZG9=O|Ws~tg;:{.jN"><field name="NUM">255</field></shadow></value><value name="G"><shadow type="pins_digital" id="#5Jo!el/5]Hg~;04J*Tt"><field name="PIN">4</field></shadow></value><value name="g"><shadow type="math_number" id="*q$WAOziDbC1hDUX}eVX"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="pins_digital" id="ycuE:u6l1/+=H#$a*i8R"><field name="PIN">2</field></shadow></value><value name="b"><shadow type="math_number" id="N6Mh[A#C|@3:QL=llOGo"><field name="NUM">0</field></shadow></value></block></statement><next><block type="controls_if" id="G4ZBIUIuJ[mZ060PU~ZD"><value name="IF0"><block type="logic_compare" id="rZy)9ytP_#gA!{Ruc|,Y"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="`ZGQpDM!h7?uq+T5{O!^"><field name="VAR">val</field></block></value><value name="B"><block type="math_number" id="-U0l|0hlTqsP5*C$^)|l"><field name="NUM">1</field></block></value></block></value><statement name="DO0"><block type="ke_rgb2_2" id="x/ulVn7=BnSLVk)iWucL"><value name="R"><shadow type="pins_digital" id="`ntvZ3AId~]-0h7MQudc"><field name="PIN">32</field></shadow></value><value name="r"><shadow type="math_number" id="hE`3R+0bVn27EZ06_}:["><field name="NUM">0</field></shadow></value><value name="G"><shadow type="pins_digital" id="*Vj|yR)J]??cYl7d|gBK"><field name="PIN">4</field></shadow></value><value name="g"><shadow type="math_number" id="ugI7U|`s[M#JeL=!A`4A"><field name="NUM">255</field></shadow></value><value name="B"><shadow type="pins_digital" id="g7`oK{r5w|uEs{--dm/H"><field name="PIN">2</field></shadow></value><value name="b"><shadow type="math_number" id="=)P2u]}Pt/K`_-^,kH|K"><field name="NUM">0</field></shadow></value></block></statement><next><block type="controls_if" id="9aev,`X;!]!(g]j/424="><value name="IF0"><block type="logic_compare" id="557/.8YcDl}PqHbp@xj*"><field name="OP">EQ</field><value name="A"><block type="variables_get" id="d)I6{nPt[=fJxHic3d/t"><field name="VAR">val</field></block></value><value name="B"><block type="math_number" id="M_KJE7E!;;Ev~en^#]65"><field name="NUM">2</field></block></value></block></value><statement name="DO0"><block type="ke_rgb2_2" id="39rke5qb(.2(hLGs1=#Y"><value name="R"><shadow type="pins_digital" id="kFcM-H}_4`?$I]t;vl;T"><field name="PIN">32</field></shadow></value><value name="r"><shadow type="math_number" id="p/o402iTfi!jiF]][OPs"><field name="NUM">0</field></shadow></value><value name="G"><shadow type="pins_digital" id="3PK9qOB+NFqWb9Jg$29."><field name="PIN">4</field></shadow></value><value name="g"><shadow type="math_number" id="Wno72M~)d({wQrzX-T_O"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="pins_digital" id="^~x]rjp9o9#^E-J[.QE/"><field name="PIN">2</field></shadow></value><value name="b"><shadow type="math_number" id=",r#9R`E(4?F1R|CCvI_."><field name="NUM">255</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></xml><config>{"PSRAM":{"key":"disabled","label":"Disabled"},"PartitionScheme":{"key":"default","label":"Default 4MB with spiffs (1.2MB APP/1.5MB SPIFFS)"},"CPUFreq":{"key":"240","label":"240MHz (WiFi/BT)"},"FlashMode":{"key":"qio","label":"QIO"},"FlashFreq":{"key":"80","label":"80MHz"},"FlashSize":{"key":"4M","label":"4MB (32Mb)"},"UploadSpeed":{"key":"921600","label":"921600"},"LoopCore":{"key":"1","label":"Core 1"},"EventsCore":{"key":"1","label":"Core 1"}}</config><code>CiNpbmNsdWRlIDxFU1BSb3RhcnkuaD4KCkVTUFJvdGFyeSBlbmNvZGVyMTsKdm9sYXRpbGUgaW50IEJ1dHRvbjsKdm9sYXRpbGUgYm9vbGVhbiBidG5fc3RhdGU7CnZvbGF0aWxlIGludCBjb3VudGVyOwp2b2xhdGlsZSBpbnQgdmFsOwoKdm9pZCBlbmNvZGVyMU9uTGVmdFJvdGF0aW9uKEVTUFJvdGFyeSYgZW5jb2RlcjEpIHsKICAgIGNvdW50ZXIgPSBjb3VudGVyIC0gMTsKICB2YWwgPSAobG9uZykgKGNvdW50ZXIpICUgKGxvbmcpICgzKTsKICBTZXJpYWwucHJpbnQoY291bnRlcik7CiAgU2VyaWFsLnByaW50KCIgICIpOwogIFNlcmlhbC5wcmludGxuKHZhbCk7Cn0KCnZvaWQgZW5jb2RlcjFPblJpZ2h0Um90YXRpb24oRVNQUm90YXJ5JiBlbmNvZGVyMSkgewogICAgY291bnRlciA9IGNvdW50ZXIgKyAxOwogIHZhbCA9IChsb25nKSAoY291bnRlcikgJSAobG9uZykgKDMpOwogIFNlcmlhbC5wcmludChjb3VudGVyKTsKICBTZXJpYWwucHJpbnQoIiAgIik7CiAgU2VyaWFsLnByaW50bG4odmFsKTsKfQoKdm9pZCBzZXR1cCgpewogIFNlcmlhbC5iZWdpbig5NjAwKTsKICBlbmNvZGVyMS5iZWdpbigyNywgMTQpOwogIGVuY29kZXIxLnNldFN0ZXBzUGVyQ2xpY2soMik7CiAgQnV0dG9uID0gMDsKICBidG5fc3RhdGUgPSAwOwogIGNvdW50ZXIgPSAwOwogIHZhbCA9IDA7CiAgcGluTW9kZSgzMiwgT1VUUFVUKTsKICBwaW5Nb2RlKDQsIE9VVFBVVCk7CiAgcGluTW9kZSgyLCBPVVRQVVQpOwogIGFuYWxvZ1dyaXRlKDMyLDApOwogIGFuYWxvZ1dyaXRlKDQsMCk7CiAgYW5hbG9nV3JpdGUoMiwwKTsKICBlbmNvZGVyMS5zZXRMZWZ0Um90YXRpb25IYW5kbGVyKGVuY29kZXIxT25MZWZ0Um90YXRpb24pOwogIGVuY29kZXIxLnNldFJpZ2h0Um90YXRpb25IYW5kbGVyKGVuY29kZXIxT25SaWdodFJvdGF0aW9uKTsKICBwaW5Nb2RlKDE2LCBJTlBVVCk7Cn0KCnZvaWQgbG9vcCgpewogIGVuY29kZXIxLmxvb3AoKTsKICBCdXR0b24gPSBkaWdpdGFsUmVhZCgxNik7CiAgaWYgKEJ1dHRvbiA9PSAwKSB7CiAgICBkZWxheSgxMCk7CiAgICBpZiAoQnV0dG9uID09IDApIHsKICAgICAgZGVsYXkoMTApOwogICAgICBidG5fc3RhdGUgPSAxOwogICAgICB3aGlsZSAoYnRuX3N0YXRlID09IDEpIHsKICAgICAgICBCdXR0b24gPSBkaWdpdGFsUmVhZCgxNik7CiAgICAgICAgaWYgKEJ1dHRvbiA9PSAxKSB7CiAgICAgICAgICBTZXJpYWwucHJpbnRsbigiQnV0dG9uIHByZXNzZWQhIik7CiAgICAgICAgICBidG5fc3RhdGUgPSAwOwoKICAgICAgICB9CiAgICAgIH0KCiAgICB9CgogIH0KICBpZiAodmFsID09IDApIHsKICAgIGFuYWxvZ1dyaXRlKDMyLDI1NSk7CiAgICBhbmFsb2dXcml0ZSg0LDApOwogICAgYW5hbG9nV3JpdGUoMiwwKTsKCiAgfQogIGlmICh2YWwgPT0gMSkgewogICAgYW5hbG9nV3JpdGUoMzIsMCk7CiAgICBhbmFsb2dXcml0ZSg0LDI1NSk7CiAgICBhbmFsb2dXcml0ZSgyLDApOwoKICB9CiAgaWYgKHZhbCA9PSAyKSB7CiAgICBhbmFsb2dXcml0ZSgzMiwwKTsKICAgIGFuYWxvZ1dyaXRlKDQsMCk7CiAgICBhbmFsb2dXcml0ZSgyLDI1NSk7CgogIH0KCn0=</code>